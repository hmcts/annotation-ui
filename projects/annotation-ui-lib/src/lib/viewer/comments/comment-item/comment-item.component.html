<div #source>
  <form 
    *ngIf="selectedAnnotationId == annotation.uuid || !selectedAnnotationId" 
    class="comment-list-item" 
    (ngSubmit)="onSubmit()" #commentItem="ngForm" 
    (click)="handleCommentClick($event)">
    <div class="comment-meta">
      <label>{{comment.author}}</label>
      <br>
      <label ng-controller="datCtrl">Created On: {{ comment.createdDate | date: 'd/M/y HH:mm' }}</label>
      <label *ngIf="comment.modifiedDate != null" ng-controller="datCtrl">Modified: {{ comment.modifiedDate | date }}</label>
    </div>

    <input 
      type="hidden" 
      id="author" 
      required
      [ngModel]="comment.author" name="author"
      value={{comment.author}}>

    <textarea 
      (focus)="onFocus()"
      type="text" 
      class="form-control" id="comment"
      required
      #commentTextField
      [ngModel]="comment.content" name="comment"
      value="comment.content"></textarea>

      <input 
        type="hidden" 
        #annotationIdField
        required
        [ngModel]="comment.annotation" name="annotationId"
        >

      <input 
        type="hidden" 
        id="commentId"
        required
        [ngModel]="comment.uuid" name="commentId">

      <div *ngIf="focused">
          <button type="submit" class="btn btn-success" [disabled]="!commentItem.form.valid">✓</button>
          <button class="btn" (click)="handleDeleteComment($event, comment.uuid, comment.annotation)">×</button>
      </div>

    <app-line [source]="source" [targetAnnotation]="targetAnnotation"></app-line>
  </form>
</div>